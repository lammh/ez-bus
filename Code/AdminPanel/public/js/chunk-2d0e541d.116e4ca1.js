(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e541d"],{"945a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",[n("v-card-title",[n("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-airplane-clock ")]),n("span",{staticClass:"pl-2"},[t._v("Time Table")])],1),n("v-tabs",{staticClass:"my-2",attrs:{"show-arrows":""},model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},t._l(t.tabs,(function(e){return n("v-tab",{key:e.idx},[n("v-icon",{staticClass:"me-3",attrs:{size:"20"}},[t._v(" "+t._s(e.icon)+" ")]),n("span",[t._v(t._s(e.title))])],1)})),1),n("v-tabs-items",{model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},[n("v-tab-item",[n("planned-trips-table",{attrs:{"planned-trips":t.activePlannedTrips,loading:t.isLoading,"show-notification":!0},on:{"send-notification":t.sendNotification}})],1),n("v-tab-item",[n("planned-trips-table",{attrs:{"show-start":!0,loading:t.isLoading,"show-notification":!0,"planned-trips":t.runningPlannedTrips},on:{"send-notification":t.sendNotification}})],1),n("v-tab-item",[n("planned-trips-table",{attrs:{"show-start":!0,loading:t.isLoading,"show-end":!0,"planned-trips":t.completedPlannedTrips}})],1)],1)],1)],1)},i=[],s=(n("e25e"),n("94ed")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",{attrs:{"item-key":"name",loading:t.loading,"loading-text":"Loading... Please wait",headers:t.headers,items:t.plannedTrips,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"item.trip.route.name",fn:function(e){var a=e.item;return[n("a",{on:{click:function(e){return e.stopPropagation(),t.displayRoute(a.trip.route.id)}}},[t._v(t._s(a.trip.route.name))])]}},{key:"item.driver.name",fn:function(e){var a=e.item;return[n("a",{on:{click:function(e){return e.stopPropagation(),t.displayDriver(a.driver.id)}}},[t._v(t._s(a.driver.name))])]}},{key:"item.bus.license",fn:function(e){var a=e.item;return[a.bus?n("a",{on:{click:function(e){return e.stopPropagation(),t.displayBus(a.bus)}}},[t._v(t._s(a.bus.license))]):t._e()]}},{key:"item.planned_date",fn:function(e){var a=e.item;return[n("small",[t._v(t._s(t._f("moment")(a.planned_date,"LL")))])]}},{key:"item.planned_start_date_time",fn:function(e){var a=e.item;return[n("small",{staticClass:"text-muted"},[t._v(t._s(t._f("moment")(a.planned_start_date_time,"LT")))])]}},{key:"item.planned_end_date_time",fn:function(e){var a=e.item;return[n("small",{staticClass:"text-muted"},[t._v(t._s(t._f("moment")(a.planned_end_date_time,"LT")))])]}},{key:"item.started_at",fn:function(e){var a=e.item;return[n("small",{staticClass:"text-muted"},[t._v(t._s(t._f("moment")(a.started_at,"LT")))])]}},{key:"item.ended_at",fn:function(e){var a=e.item;return[n("small",{staticClass:"text-muted"},[t._v(t._s(t._f("moment")(a.ended_at,"LT")))])]}},{key:"item.actions",fn:function(e){var a=e.item;return[t.showNotification&&a.reservations_count>0?n("v-btn",{attrs:{depressed:"",small:"",density:"compact",color:"info",icon:!0},on:{click:function(e){return t.sendNotification(a)}}},[n("v-icon",{attrs:{dark:""}},[t._v(" mdi-bell ")])],1):t._e()]}}])})},r=[],l=(n("99af"),{props:{plannedTrips:Array,showStart:{type:Boolean,default:!1},showEnd:{type:Boolean,default:!1},showNotification:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},components:{},data:function(){return{search:"",headers:[{text:"Planned Date",value:"planned_date",align:"start"},{text:"Driver",value:"driver.name"},{text:"Bus",value:"bus.license"},{text:"Route",value:"trip.route.name"},{text:"Planned Start",value:"planned_start_date_time"},{text:"Planned End",value:"planned_end_date_time"},{text:"Reservations",value:"reservations_count"},{text:" ",value:"actions",sortable:!1}]}},mounted:function(){var t=this.headers;this.showStart&&t.push({text:"Started At",value:"started_at"}),this.showEnd&&t.push({text:"Ended At",value:"ended_at"}),this.headers=t},methods:{displayRoute:function(t){this.$router.push({name:"view-route",params:{route_id:t}})},displayDriver:function(t){this.$router.push({name:"view-user",params:{user_id:t}})},displayBus:function(t){this.$swal({title:"Bus Info",html:'\n          <div class="text-left">\n            <p><b>License,:</b> '.concat(t.license,"</p>\n            <p><b>Capacity:</b> ").concat(t.capacity,"</p>\n          </div>\n        "),showCancelButton:!1,focusConfirm:!1,confirmButtonText:"Ok"})},sendNotification:function(t){this.$emit("send-notification",t)}}}),c=l,d=n("2877"),u=n("6544"),p=n.n(u),m=n("8336"),f=n("8fea"),v=n("132d"),_=n("8654"),h=Object(d["a"])(c,o,r,!1,null,null,null),b=h.exports;p()(h,{VBtn:m["a"],VDataTable:f["a"],VIcon:v["a"],VTextField:_["a"]});var x=n("b012"),y={components:{plannedTripsTable:b},data:function(){return{activePlannedTrips:[],runningPlannedTrips:[],completedPlannedTrips:[],isLoading:!1,search:"",tabs:[{idx:0,title:"Not started",icon:s["O"]},{idx:1,title:"On route",icon:s["f"]},{idx:2,title:"Completed",icon:s["a"]}],active_tab:null,icons:{mdiAccountCheck:s["a"],mdiAirplane:s["f"],mdiPlayCircleOutline:s["O"]}}},watch:{active_tab:function(t,e){localStorage.tabIdxPlannedTrips=t}},mounted:function(){this.active_tab=parseInt(localStorage.tabIdxPlannedTrips),this.loadPlannedTrips()},methods:{loadPlannedTrips:function(){var t=this;this.isLoading=!0,axios.get("/planned-trips/all").then((function(e){t.activePlannedTrips=e.data.active,t.runningPlannedTrips=e.data.running,t.completedPlannedTrips=e.data.completed}))["catch"]((function(e){t.$notify({title:"Error",text:"Error while retrieving planned trips",type:"error"}),console.log(e),x["a"].checkError(e.response.data.message,t.$router,t.$swal)})).then((function(){t.isLoading=!1}))},sendNotification:function(t,e){var n=this;this.$swal({input:"textarea",inputPlaceholder:"Please enter the notification message here",inputAttributes:{"aria-label":"Please enter the notification message"},title:"Send notification",html:"Please enter the notification message",icon:"info",showCancelButton:!0,confirmButtonText:"Send notification"}).then((function(e){e.isConfirmed&&axios.post("/planned-trips/notify",{id:t.id,message:e.value}).then((function(t){n.$notify({title:"Success",text:"Notification sent successfully",type:"success"}),201==t.status&&n.$swal("Info",t.data.message,"info")}))["catch"]((function(t){n.$notify({title:"Error",text:"Error while sending notification",type:"error"}),console.log(t),n.$swal("Error",t.response.data.message,"error")}))}))}}},g=y,w=n("b0af"),T=n("99d9"),k=n("71a3"),P=n("c671"),C=n("fe57"),L=n("aac8"),$=Object(d["a"])(g,a,i,!1,null,null,null);e["default"]=$.exports;p()($,{VCard:w["a"],VCardTitle:T["c"],VIcon:v["a"],VTab:k["a"],VTabItem:P["a"],VTabs:C["a"],VTabsItems:L["a"]})}}]);
//# sourceMappingURL=chunk-2d0e541d.116e4ca1.js.map