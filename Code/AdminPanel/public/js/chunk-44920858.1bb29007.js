(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44920858"],{"0fd9":function(t,e,i){"use strict";var n=i("ade3"),a=i("5530"),s=(i("13d5"),i("d3b7"),i("caad"),i("2532"),i("99af"),i("b64b"),i("ac1f"),i("5319"),i("4ec9"),i("3ca3"),i("ddb0"),i("4160"),i("159b"),i("4b85"),i("2b0e")),r=i("d9f7"),o=i("80d2"),c=["sm","md","lg","xl"],l=["start","end","center"];function u(t,e){return c.reduce((function(i,n){return i[t+Object(o["G"])(n)]=e(),i}),{})}var d=function(t){return[].concat(l,["baseline","stretch"]).includes(t)},h=u("align",(function(){return{type:String,default:null,validator:d}})),f=function(t){return[].concat(l,["space-between","space-around"]).includes(t)},v=u("justify",(function(){return{type:String,default:null,validator:f}})),g=function(t){return[].concat(l,["space-between","space-around","stretch"]).includes(t)},p=u("alignContent",(function(){return{type:String,default:null,validator:g}})),m={align:Object.keys(h),justify:Object.keys(v),alignContent:Object.keys(p)},b={align:"align",justify:"justify",alignContent:"align-content"};function y(t,e,i){var n=b[t];if(null!=i){if(e){var a=e.replace(t,"");n+="-".concat(a)}return n+="-".concat(i),n.toLowerCase()}}var C=new Map;e["a"]=s["default"].extend({name:"v-row",functional:!0,props:Object(a["a"])(Object(a["a"])(Object(a["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d}},h),{},{justify:{type:String,default:null,validator:f}},v),{},{alignContent:{type:String,default:null,validator:g}},p),render:function(t,e){var i=e.props,a=e.data,s=e.children,o="";for(var c in i)o+=String(i[c]);var l=C.get(o);return l||function(){var t,e;for(e in l=[],m)m[e].forEach((function(t){var n=i[t],a=y(e,t,n);a&&l.push(a)}));l.push((t={"no-gutters":i.noGutters,"row--dense":i.dense},Object(n["a"])(t,"align-".concat(i.align),i.align),Object(n["a"])(t,"justify-".concat(i.justify),i.justify),Object(n["a"])(t,"align-content-".concat(i.alignContent),i.alignContent),t)),C.set(o,l)}(),t(i.tag,Object(r["a"])(a,{staticClass:"row",class:l}),s)}})},"169a":function(t,e,i){"use strict";var n=i("5530"),a=i("2909"),s=i("ade3"),r=(i("a9e3"),i("498a"),i("4795"),i("c0b6"),i("caad"),i("2532"),i("45fc"),i("d3b7"),i("7db0"),i("368e"),i("480e")),o=i("4ad4"),c=i("b848"),l=i("75eb"),u=i("e707"),d=i("e4d3"),h=i("21be"),f=i("f2e7"),v=i("a293"),g=i("58df"),p=i("d9bd"),m=i("80d2"),b=Object(g["a"])(o["a"],c["a"],l["a"],u["a"],d["a"],h["a"],f["a"]);e["a"]=b.extend({name:"v-dialog",directives:{ClickOutside:v["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var t;return t={},Object(s["a"])(t,"v-dialog ".concat(this.contentClass).trim(),!0),Object(s["a"])(t,"v-dialog--active",this.isActive),Object(s["a"])(t,"v-dialog--persistent",this.persistent),Object(s["a"])(t,"v-dialog--fullscreen",this.fullscreen),Object(s["a"])(t,"v-dialog--scrollable",this.scrollable),Object(s["a"])(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(p["e"])("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):u["a"].options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$nextTick((function(){t.$refs.content.contains(document.activeElement)||(t.previousActiveElement=document.activeElement,t.$refs.content.focus()),t.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===m["y"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var i=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=Object(a["a"])(i).find((function(t){return!t.hasAttribute("disabled")}));n&&n.focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(r["a"],{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:Object(n["a"])({role:"document",tabindex:t.isActive?0:void 0},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent:function(){var t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style=Object(n["a"])(Object(n["a"])({},t.style),{},{maxWidth:Object(m["h"])(this.maxWidth),width:Object(m["h"])(this.width)})),this.$createElement("div",t,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"368e":function(t,e,i){},"3a2f":function(t,e,i){"use strict";var n=i("ade3"),a=(i("a9e3"),i("e25e"),i("9734"),i("4ad4")),s=i("a9ad"),r=i("16b7"),o=i("b848"),c=i("f573"),l=i("f2e7"),u=i("80d2"),d=i("d9bd"),h=i("58df");e["a"]=Object(h["a"])(s["a"],r["a"],o["a"],c["a"],l["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,i=t.content,n=!this.bottom&&!this.left&&!this.top&&!this.right,a=!1!==this.attach?e.offsetLeft:e.left,s=0;return this.top||this.bottom||n?s=a+e.width/2-i.width/2:(this.left||this.right)&&(s=a+(this.right?e.width:-i.width)+(this.right?10:-10)),this.nudgeLeft&&(s-=parseInt(this.nudgeLeft)),this.nudgeRight&&(s+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(s,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,i=t.content,n=!1!==this.attach?e.offsetTop:e.top,a=0;return this.top||this.bottom?a=n+(this.bottom?e.height:-i.height)+(this.bottom?10:-10):(this.left||this.right)&&(a=n+e.height/2-i.height/2),this.nudgeTop&&(a-=parseInt(this.nudgeTop)),this.nudgeBottom&&(a+=parseInt(this.nudgeBottom)),!1===this.attach&&(a+=this.pageYOffset),"".concat(this.calcYOverflow(a),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(u["h"])(this.maxWidth),minWidth:Object(u["h"])(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(u["u"])(this,"activator",!0)&&Object(d["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=a["a"].options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===u["y"].esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(n["a"])(t,this.contentClass,!0),Object(n["a"])(t,"menuable__content__active",this.isActive),Object(n["a"])(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}})},"3ffe":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-btn",{staticClass:"mr-2",attrs:{depressed:"",disabled:!t.activationStore.isActivated,color:"primary"},on:{click:t.create}},[t._v(" Create "),i("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-plus-thick ")])],1)},a=[],s=i("2fa3"),r={name:"CreateButton",setup:function(){return{activationStore:s["a"]}},methods:{create:function(){this.$emit("create")}}},o=r,c=i("2877"),l=i("6544"),u=i.n(l),d=i("8336"),h=i("132d"),f=Object(c["a"])(o,n,a,!1,null,null,null);e["a"]=f.exports;u()(f,{VBtn:d["a"],VIcon:h["a"]})},"4b85":function(t,e,i){},"4bd4":function(t,e,i){"use strict";var n=i("5530"),a=(i("caad"),i("2532"),i("07ac"),i("4de4"),i("d3b7"),i("4160"),i("159b"),i("4795"),i("7db0"),i("58df")),s=i("7e2b"),r=i("3206");e["a"]=Object(a["a"])(s["a"],Object(r["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},n={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=t.$watch("shouldValidate",(function(a){a&&(e.errorBag.hasOwnProperty(t._uid)||(n.valid=i(t)))})):n.valid=i(t),n},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots["default"])}})},"62ad":function(t,e,i){"use strict";var n=i("ade3"),a=i("5530"),s=(i("13d5"),i("d3b7"),i("a9e3"),i("b64b"),i("ac1f"),i("5319"),i("4ec9"),i("3ca3"),i("ddb0"),i("caad"),i("4160"),i("159b"),i("45fc"),i("2ca0"),i("4b85"),i("2b0e")),r=i("d9f7"),o=i("80d2"),c=["sm","md","lg","xl"],l=function(){return c.reduce((function(t,e){return t[e]={type:[Boolean,String,Number],default:!1},t}),{})}(),u=function(){return c.reduce((function(t,e){return t["offset"+Object(o["G"])(e)]={type:[String,Number],default:null},t}),{})}(),d=function(){return c.reduce((function(t,e){return t["order"+Object(o["G"])(e)]={type:[String,Number],default:null},t}),{})}(),h={col:Object.keys(l),offset:Object.keys(u),order:Object.keys(d)};function f(t,e,i){var n=t;if(null!=i&&!1!==i){if(e){var a=e.replace(t,"");n+="-".concat(a)}return"col"!==t||""!==i&&!0!==i?(n+="-".concat(i),n.toLowerCase()):n.toLowerCase()}}var v=new Map;e["a"]=s["default"].extend({name:"v-col",functional:!0,props:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({cols:{type:[Boolean,String,Number],default:!1}},l),{},{offset:{type:[String,Number],default:null}},u),{},{order:{type:[String,Number],default:null}},d),{},{alignSelf:{type:String,default:null,validator:function(t){return["auto","start","end","center","baseline","stretch"].includes(t)}},tag:{type:String,default:"div"}}),render:function(t,e){var i=e.props,a=e.data,s=e.children,o=(e.parent,"");for(var c in i)o+=String(i[c]);var l=v.get(o);return l||function(){var t,e;for(e in l=[],h)h[e].forEach((function(t){var n=i[t],a=f(e,t,n);a&&l.push(a)}));var a=l.some((function(t){return t.startsWith("col-")}));l.push((t={col:!a||!i.cols},Object(n["a"])(t,"col-".concat(i.cols),i.cols),Object(n["a"])(t,"offset-".concat(i.offset),i.offset),Object(n["a"])(t,"order-".concat(i.order),i.order),Object(n["a"])(t,"align-self-".concat(i.alignSelf),i.alignSelf),t)),v.set(o,l)}(),t(i.tag,Object(r["a"])(a,{class:l}),s)}})},"63eb":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[i("v-card-title",[i("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-bus-multiple ")]),i("span",{staticClass:"pl-2"},[t._v("Buses")]),i("v-spacer"),i("create-button",{on:{create:t.showBusDialog}}),i("activation-tool-tip",{attrs:{model:"buses"}})],1),i("v-data-table",{attrs:{"item-key":"id",loading:t.isLoading,"loading-text":"Loading... Please wait",headers:t.headers,items:t.buses,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"item.driver",fn:function(e){var n=e.item;return[i("v-chip",{attrs:{color:t.getDriverAssignmentColor(n.driver),dark:""},on:{click:function(e){return t.assignDriver(n)}}},[t._v(" "+t._s(t.getDriver(n.driver))+" ")])]}},{key:"item.created_at",fn:function(e){var n=e.item;return[i("small",[t._v(t._s(t._f("moment")(n.created_at,"LL")))]),t._v(" - "),i("small",{staticClass:"text-muted"},[t._v(t._s(t._f("moment")(n.created_at,"LT")))])]}},{key:"item.actions",fn:function(e){var n=e.item;return[n.driver?i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.unAssignDriver(n)}}},[t._v(" mdi-account-off ")]):i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.assignDriver(n)}}},[t._v(" mdi-account-tie-hat ")]),i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editBus(n)}}},[t._v(" mdi-pencil ")]),i("v-icon",{attrs:{small:""},on:{click:function(e){t.deleteBus(n,t.buses.indexOf(n))}}},[t._v(" mdi-delete ")])]}}])})],1),i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.busDialog,callback:function(e){t.busDialog=e},expression:"busDialog"}},[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"text-h5"},[t._v("Bus data")])]),i("v-card-text",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[i("v-text-field",{attrs:{rules:t.licenseRules,label:"License plate*",hint:"license plate of the bus",required:""},model:{value:t.license,callback:function(e){t.license=e},expression:"license"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[i("v-text-field",{attrs:{label:"Capacity",hint:"number of seats in the bus",disabled:""},model:{value:t.capacity,callback:function(e){t.capacity=e},expression:"capacity"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[i("v-text-field",{attrs:{rules:t.priceFactorRules,label:"Pricing Factor*",hint:"pricing factor of the bus, e.g. 1.5 means 50% more than the normal price",required:""},model:{value:t.price_factor,callback:function(e){t.price_factor=e},expression:"price_factor"}})],1)],1),i("bus-seat-configurator",{staticClass:"my-6",attrs:{"initial-config":t.seatConfig},on:{"config-change":t.updateSeats}})],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.busDialog=!1}}},[t._v(" Close ")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.createBus}},[t._v(" Save ")])],1)],1)],1)],1)],1),t.selectedBus?i("v-dialog",{attrs:{"max-width":"390"},model:{value:t.driversDialog,callback:function(e){t.driversDialog=e},expression:"driversDialog"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5"},[t._v(" Select driver for '"+t._s(t.selectedBus.license)+"' ")]),i("v-card-text",[i("v-list",{attrs:{dense:""}},[i("v-subheader",[t._v("Drivers")]),i("v-list-item-group",t._l(t.availableDrivers,(function(e,n){return i("v-list-item",{key:n},[i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e.name)},on:{click:function(i){return t.assignDriverToBus(e)}}})],1)],1)})),1)],1)],1),i("v-container",{staticStyle:{height:"400px"}},[i("v-row",{directives:[{name:"show",rawName:"v-show",value:t.loadingDrivers,expression:"loadingDrivers"}],staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[i("v-col",{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Please wait ... ")]),i("v-col",{attrs:{cols:"6"}},[i("v-progress-linear",{attrs:{active:t.loadingDrivers,color:"primary",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.closeDriverDialog}},[t._v(" Close ")])],1)],1)],1):t._e()],1)},a=[],s=(i("ac1f"),i("00b4"),i("e9c4"),i("a434"),i("b0c0"),i("ef2c")),r=i("3ffe"),o=i("b012"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bus-configurator"},[i("div",{staticClass:"seat-map"},[i("div",{staticClass:"bus-header"},[i("div",{staticClass:"controls"},[i("div",{staticClass:"form-group"},[i("v-text-field",{attrs:{label:"Rows","persistent-hint":"",required:""},on:{input:t.updateGrid},model:{value:t.totalRows,callback:function(e){t.totalRows=e},expression:"totalRows"}})],1),i("div",{staticClass:"form-group"},[i("v-text-field",{attrs:{label:"Columns","persistent-hint":"",required:""},on:{input:t.updateGrid},model:{value:t.totalColumns,callback:function(e){t.totalColumns=e},expression:"totalColumns"}})],1),i("v-btn",{attrs:{color:"primary"},on:{click:t.addRow}},[t._v(" Add Row ")])],1)]),i("div",{staticClass:"bus-body my-4"},t._l(t.seatGrid,(function(e,n){return i("v-row",{key:"row-"+n,staticClass:"seat-row"},[i("v-col",{attrs:{cols:"3"}},[i("div",[i("span",{staticClass:"row-number"},[t._v("Row "+t._s(n+1))])])]),i("div",{staticClass:"seats-container"},[t._l(e,(function(e,a){return i("div",{key:"seat-"+n+"-"+a,staticClass:"seat",class:{"seat-available":e,"seat-empty":!e},on:{click:function(e){return t.toggleSeat(n,a)}}},[t._v(" "+t._s(e?n*t.totalColumns+a+1:"")+" ")])})),i("v-btn",{attrs:{color:"error mr-2",small:""},on:{click:function(e){return t.removeRow(n)}}},[i("v-icon",[t._v(" mdi-delete ")])],1)],2)],1)})),1)])])},l=[],u=(i("cb29"),i("a9e3"),i("13d5"),i("d3b7"),i("4de4"),{name:"BusSeatConfigurator",props:{initialConfig:{type:Object,default:null}},data:function(){return{totalRows:5,totalColumns:4,seatGrid:[],configJson:""}},created:function(){this.initialConfig?this.loadConfiguration(this.initialConfig):this.initializeGrid()},methods:{initializeGrid:function(){this.seatGrid=[];for(var t=0;t<this.totalRows;t++)if(0===t){var e=Array(this.totalColumns).fill(!1);this.totalColumns>=2&&(e[this.totalColumns-1]=!0,e[this.totalColumns-2]=!0),this.seatGrid.push(e)}else this.seatGrid.push(Array(this.totalColumns).fill(!0));this.emitConfigChange()},updateGrid:function(){for(var t=[],e=0;e<this.totalRows;e++){for(var i=this.seatGrid[e]||Array(this.totalColumns).fill(!0),n=Array(this.totalColumns).fill(!1),a=0;a<this.totalColumns;a++)a<i.length?n[a]=i[a]:n[a]=!0;t.push(n)}this.seatGrid=t,this.emitConfigChange()},toggleSeat:function(t,e){-1===e?this.seatGrid[t][0]=!this.isFirstColumnEmpty(t):e===this.totalColumns?this.seatGrid[t][this.totalColumns-1]=!this.isLastColumnEmpty(t):this.$set(this.seatGrid[t],e,!this.seatGrid[t][e]),this.emitConfigChange()},isFirstColumnEmpty:function(t){return!this.seatGrid[t][0]},isLastColumnEmpty:function(t){return!this.seatGrid[t][this.totalColumns-1]},addRow:function(){var t=Array(Number(this.totalColumns)).fill(!0);this.seatGrid.push(t),this.totalRows=this.seatGrid.length,this.emitConfigChange()},removeRow:function(t){this.seatGrid.length>1&&(this.seatGrid.splice(t,1),this.totalRows=this.seatGrid.length,this.emitConfigChange())},countTotalSeats:function(){return this.seatGrid.reduce((function(t,e){return t+e.filter((function(t){return t})).length}),0)},getCurrentConfig:function(){return{rows:this.totalRows,columns:this.totalColumns,seatGrid:JSON.parse(JSON.stringify(this.seatGrid))}},saveConfiguration:function(){var t=this.getCurrentConfig(),e=JSON.stringify(t,null,2);this.configJson=e,this.$emit("save-config",t)},applyLoadedConfig:function(){try{var t=JSON.parse(this.configJson);this.loadConfiguration(t)}catch(e){alert("Invalid configuration JSON. Please check the format and try again.")}},loadConfiguration:function(t){t&&t.seatGrid?(this.totalRows=t.rows||t.seatGrid.length,this.totalColumns=t.columns||(t.seatGrid[0]?t.seatGrid[0].length:4),this.seatGrid=JSON.parse(JSON.stringify(t.seatGrid))):console.error("Invalid configuration object")},emitConfigChange:function(){this.$emit("config-change",this.getCurrentConfig())}},watch:{initialConfig:{handler:function(t){t&&this.loadConfiguration(t)},deep:!0}}}),d=u,h=(i("fe4f"),i("2877")),f=i("6544"),v=i.n(f),g=i("8336"),p=i("62ad"),m=i("132d"),b=i("0fd9"),y=i("8654"),C=Object(h["a"])(d,c,l,!1,null,"deaeae02",null),w=C.exports;v()(C,{VBtn:g["a"],VCol:p["a"],VIcon:m["a"],VRow:b["a"],VTextField:y["a"]});var x={components:{ActivationToolTip:s["a"],CreateButton:r["a"],BusSeatConfigurator:w},data:function(){return{buses:[],availableDrivers:[],isLoading:!1,search:"",busDialog:!1,driversDialog:!1,loadingDrivers:!1,valid:!0,id:null,selectedBus:null,license:"",licenseRules:[function(t){return!!t||"License plate is required"},function(t){return t&&t.length<=15||"License plate must be less than 15 characters"}],capacity:20,capacityRules:[function(t){return/^[0-9]+$/.test(t)||"Capacity is not valid"}],priceFactor:"1",priceFactorRules:[function(t){return/^[0-9]+(\.[0-9]+)?$/.test(t)||"Pricing factor is not valid"},function(t){return t>0||"Pricing factor must be greater than 0"}],headers:[{text:"ID",value:"id",align:"start",filterable:!1},{text:"License",value:"license"},{text:"Capacity",value:"capacity"},{text:"Pricing Factor",value:"price_factor"},{text:"Driver",value:"driver"},{text:"Created",value:"created_at"},{text:"Actions",value:"actions",sortable:!1}],seatConfig:{totalRows:5,totalColumns:4,seatGrid:[[!0,!0,!0,!0],[!0,!0,!0,!0],[!0,!0,!0,!0],[!0,!0,!0,!0],[!0,!0,!0,!0]]}}},mounted:function(){this.loadBuses()},methods:{loadBuses:function(){var t=this;this.isLoading=!0,this.buses=[],axios.get("/buses/all").then((function(e){t.buses=e.data}))["catch"]((function(e){t.$notify({title:"Error",text:"Error while retrieving buses",type:"error"}),console.log(e),o["a"].checkError(e.response.data.message,t.$router,t.$swal)})).then((function(){t.isLoading=!1}))},validate:function(){return this.$refs.form.validate()},createBus:function(){var t=this;this.validate()&&(this.isLoading=!0,this.busDialog=!1,axios.post("/buses/create-edit",{bus:{id:this.id,license:this.license,capacity:this.capacity,price_factor:this.price_factor,seat_config:JSON.stringify(this.seatConfig)}}).then((function(e){t.loadBuses(),t.$notify({title:"Success",text:t.id?"Bus updated!":"Bus created!",type:"success"}),t.$swal("Success","Bus "+(t.id?"updated":"created")+" successfully","success")}))["catch"]((function(e){t.$notify({title:"Error",text:"Error while creating bus",type:"error"}),console.log(e),t.$swal("Error",e.response.data.message,"error")})).then((function(){t.isLoading=!1})))},showBusDialog:function(){this.license="",this.price_factor="1",this.id=null,this.capacity=20,this.seatConfig={totalRows:5,totalColumns:4,seatGrid:[[!0,!0,!0,!0],[!0,!0,!0,!0],[!0,!0,!0,!0],[!0,!0,!0,!0],[!0,!0,!0,!0]]},this.busDialog=!0},editBus:function(t){this.id=t.id,this.license=t.license,this.capacity=t.capacity,this.price_factor=t.price_factor,this.seatConfig=JSON.parse(t.seat_config),console.log(this.seatConfig),this.updateCapacity(),this.busDialog=!0},deleteBus:function(t,e){var i=this;this.$swal.fire({title:"Delete bus",text:"Are you sure to delete the bus ' "+t.license+" ' ? You won't be able to revert this!",icon:"error",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then((function(n){n.isConfirmed&&i.deleteBusServer(t.id,e)}))},deleteBusServer:function(t,e){var i=this;axios["delete"]("/buses/".concat(t)).then((function(t){i.buses.splice(e,1),i.$notify({title:"Success",text:"Bus deleted!",type:"success"})}))["catch"]((function(t){i.$notify({title:"Error",text:"Error while deleting buses",type:"error"}),i.$swal("Error",t.response.data.message,"error")})).then((function(){}))},getDriverAssignmentColor:function(t){return t?"success":"error"},getDriver:function(t){return t?t.name:"none"},assignDriver:function(t){this.selectedBus=t,this.driversDialog=!0,this.loadAvailableDrivers()},loadAvailableDrivers:function(){var t=this;this.loadingDrivers=!0,this.availableDrivers=[],axios.get("/buses/available-drivers").then((function(e){t.availableDrivers=e.data}))["catch"]((function(e){t.$notify({title:"Error",text:"Error while retrieving drivers",type:"error"}),console.log(e),t.$swal("Error",e.response.data.message,"error")})).then((function(){t.loadingDrivers=!1}))},assignDriverToBus:function(t){var e=this;this.loadingDrivers=!0,axios.post("/buses/assign-driver",{bus_id:this.selectedBus.id,driver_id:t.id}).then((function(t){e.loadBuses(),e.$notify({title:"Success",text:"Driver assigned to bus!",type:"success"}),e.$swal("Success","Driver assigned to bus successfully","success")}))["catch"]((function(t){e.$notify({title:"Error",text:"Error while assigning driver to bus",type:"error"}),console.log(t),e.$swal("Error",t.response.data.message,"error")})).then((function(){e.loadingDrivers=!1,e.closeDriverDialog()}))},unAssignDriver:function(t){var e=this;this.$swal.fire({title:"Un-assign driver from bus",text:"Are you sure to un-assign the driver ' "+t.driver.name+" ' from the bus '"+t.license+"' ? You won't be able to revert this!",icon:"error",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then((function(i){i.isConfirmed&&e.unAssignDriverFromBus(t)}))},unAssignDriverFromBus:function(t){var e=this;this.isLoading=!0,axios.post("/buses/unassign-driver",{bus_id:t.id}).then((function(t){e.loadBuses(),e.$notify({title:"Success",text:"Driver unassigned from bus!",type:"success"}),e.$swal("Success","Driver unassigned from bus successfully","success")}))["catch"]((function(t){e.$notify({title:"Error",text:"Error while un-assigning driver from bus",type:"error"}),console.log(t),e.$swal("Error",t.response.data.message,"error")})).then((function(){e.isLoading=!1}))},closeDriverDialog:function(){this.driversDialog=!1,this.loadingDrivers=!1,this.availableDrivers=[]},updateSeats:function(t){this.seatConfig=t,this.updateCapacity()},updateCapacity:function(){for(var t=0,e=0;e<this.seatConfig.seatGrid.length;e++)for(var i=0;i<this.seatConfig.seatGrid[e].length;i++)this.seatConfig.seatGrid[e][i]&&t++;this.capacity=t}}},_=x,O=i("b0af"),S=i("99d9"),k=i("cc20"),B=i("a523"),D=i("8fea"),j=i("169a"),$=i("4bd4"),A=i("8860"),E=i("da13"),G=i("5d23"),T=i("1baa"),L=i("8e36"),V=i("2fa4"),I=i("e0c7"),R=Object(h["a"])(_,n,a,!1,null,null,null);e["default"]=R.exports;v()(R,{VBtn:g["a"],VCard:O["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:S["c"],VChip:k["a"],VCol:p["a"],VContainer:B["a"],VDataTable:D["a"],VDialog:j["a"],VForm:$["a"],VIcon:m["a"],VList:A["a"],VListItem:E["a"],VListItemContent:G["a"],VListItemGroup:T["a"],VListItemTitle:G["c"],VProgressLinear:L["a"],VRow:b["a"],VSpacer:V["a"],VSubheader:I["a"],VTextField:y["a"]})},"648f":function(t,e,i){},9734:function(t,e,i){},a523:function(t,e,i){"use strict";i("4de4"),i("d3b7"),i("b64b"),i("2ca0"),i("99af"),i("20f6"),i("4b85"),i("498a"),i("a15b");var n=i("2b0e");function a(t){return n["default"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,i){var n=i.props,a=i.data,s=i.children;a.staticClass="".concat(t," ").concat(a.staticClass||"").trim();var r=a.attrs;if(r){a.attrs={};var o=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(a.attrs[t]=e,!1):e||"string"===typeof e}));o.length&&(a.staticClass+=" ".concat(o.join(" ")))}return n.id&&(a.domProps=a.domProps||{},a.domProps.id=n.id),e(n.tag,a,s)}})}var s=i("d9f7");e["a"]=a("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var i,n=e.props,a=e.data,r=e.children,o=a.attrs;return o&&(a.attrs={},i=Object.keys(o).filter((function(t){if("slot"===t)return!1;var e=o[t];return t.startsWith("data-")?(a.attrs[t]=e,!1):e||"string"===typeof e}))),n.id&&(a.domProps=a.domProps||{},a.domProps.id=n.id),t(n.tag,Object(s["a"])(a,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(i||[])}),r)}})},ef2c:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.activationStore.isActivated?t._e():i("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-icon",t._g({attrs:{color:"primary"}},n),[t._v(" mdi-information-outline ")])]}}],null,!1,1816130901)},[i("span",[t._v("Activate the system to create "+t._s(t.model))])])},a=[],s=i("2fa3"),r={name:"ActivationToolTip",props:{model:{type:String,default:""}},setup:function(){return{activationStore:s["a"]}}},o=r,c=i("2877"),l=i("6544"),u=i.n(l),d=i("132d"),h=i("3a2f"),f=Object(c["a"])(o,n,a,!1,null,null,null);e["a"]=f.exports;u()(f,{VIcon:d["a"],VTooltip:h["a"]})},fe4f:function(t,e,i){"use strict";i("648f")}}]);
//# sourceMappingURL=chunk-44920858.1bb29007.js.map