(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c9b8c58"],{"628d":function(e,t,n){},"6daa":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[n("v-icon",{attrs:{color:"primary"}},[e._v(" mdi-clock-outline ")]),n("span",{staticClass:"pl-2"},[e._v("Upcoming Payments")])],1),n("v-data-table",{attrs:{"item-key":"id",loading:e.isLoading,"loading-text":"Loading... Please wait",headers:e.headers,items:e.payments,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"item.redemption_preference",fn:function(t){var i=t.item;return[n("v-chip",{attrs:{color:e.getRedemptionPreferenceColor(i.redemption_preference),dark:""}},[e._v(" "+e._s(e.getRedemptionPreferenceValue(i.redemption_preference))+" "),n("v-icon",{staticClass:"ml-2"},[e._v(" "+e._s(e.getIconOfRedemptionPreference(i.redemption_preference))+" ")])],1)]}},{key:"item.actions",fn:function(t){var i=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.viewUpcomingPayment(i)}}},[e._v(" mdi-eye ")]),n("v-btn",{attrs:{depressed:"",small:"",density:"compact",color:"primary"},on:{click:function(t){e.redeemPayment(e.payments.indexOf(i))}}},[n("v-icon",{attrs:{dark:""}},[e._v(" mdi-bank-plus ")])],1)]}}])})],1)],1)},a=[],r=(n("b0c0"),n("a434"),{components:{},data:function(){return{payments:[],isLoading:!1,search:"",headers:[{text:"User ID",value:"id",align:"start",filterable:!1},{text:"Name",value:"user_name"},{text:"Redemption",value:"redemption_preference"},{text:"Reservations",value:"total_reservations"},{text:"Amount",value:"total_amount"},{text:"Actions",value:"actions",sortable:!1}]}},mounted:function(){this.loadPayments()},methods:{getIconOfRedemptionPreference:function(e){return 2==e?"mdi-bank":3==e?"mdi-credit-card":4==e?"mdi-credit-card-multiple":"mdi-cash"},getRedemptionPreferenceColor:function(e){return 2==e?"primary":3==e?"info":4==e?"secondary":"success"},getRedemptionPreferenceValue:function(e){return 2==e?"Bank":3==e?"PayPal":4==e?"Mobile Money":"Cash"},viewRoute:function(e){this.$router.push({name:"view-route",params:{route_id:e.id}})},loadPayments:function(){var e=this;this.isLoading=!0,this.payments=[],axios.get("/users/upcoming-payments").then((function(t){e.payments=t.data}))["catch"]((function(t){e.$notify({title:"Error",text:"Error while retrieving payments",type:"error"}),console.log(t),e.$swal("Error",t.response.data.message,"error")})).then((function(){e.isLoading=!1}))},viewUpcomingPayment:function(e){this.$router.push({name:"view-upcoming-payment",params:{user_id:e.id}})},redeemPayment:function(e){var t=this;this.$swal({title:"Redeem Payment",html:"Are you sure you want to redeem "+this.payments[e].total_amount+" for "+this.payments[e].user_name+"? <br/><br/>"+this.showRedemptionDetails(e),icon:"warning",footer:this.showRedemptionFooter(e),showCancelButton:!0,confirmButtonText:"Yes, redeem it!"}).then((function(n){n.isConfirmed&&t.redeemPaymentServer(t.payments[e].id,e)}))},showRedemptionFooter:function(e){var t=this.payments[e].redemption_preference;return 2==t?"<h2>Bank Account</h2>":3==t?"<h2>PayPal</h2>":4==t?"<h2>Mobile Money</h2>":"<h2>Cash</h2>"},showRedemptionDetails:function(e){var t=this.payments[e].redemption_preference;return console.log(t),2==t?"<ul><li><b>Bank Name:</b> "+this.payments[e].redemption_details.bank_name+"</li><li><b>Account Number:</b> "+this.payments[e].redemption_details.account_number+"</li><li><b>Beneficiary Name:</b> "+this.payments[e].redemption_details.beneficiary_name+"</li><li><b>Beneficiary Address:</b> "+this.payments[e].redemption_details.beneficiary_address+"</li>"+(null!=this.payments[e].redemption_details.iban?"<li><b>IBAN:</b> "+this.payments[e].redemption_details.iban+"</li>":"")+(null!=this.payments[e].redemption_details.swift?"<li><b>Swift:</b> "+this.payments[e].redemption_details.swift+"</li>":"")+(null!=this.payments[e].redemption_details.routing_number?"<li><b>Routing Number:</b> "+this.payments[e].redemption_details.routing_number+"</li>":"")+(null!=this.payments[e].redemption_details.bic?"<li><b>Bank Identification Code:</b> "+this.payments[e].redemption_details.bic+"</li>":"")+"</ul>":3==t?"<b>PayPal:</b> "+this.payments[e].redemption_details.email:4==t?"<ul><li><b>Phone Number:</b> "+this.payments[e].redemption_details.phone_number+"</li><li><b>Network:</b> "+this.payments[e].redemption_details.network+"</li><li><b>Name:</b> "+this.payments[e].redemption_details.name+"</li></ul>":""},redeemPaymentServer:function(e,t){var n=this;this.isLoading=!0,axios.post("/users/redeem",{user_id:e}).then((function(e){n.$notify({title:"Success",text:"Payment redeemed",type:"success"}),n.payments.splice(t,1)}))["catch"]((function(e){n.$notify({title:"Error",text:"Error while redeeming payment",type:"error"}),console.log(e),n.$swal("Error",e.response.data.message,"error")})).then((function(){n.isLoading=!1}))}}}),s=r,o=(n("d7a3"),n("2877")),m=n("6544"),l=n.n(m),c=n("8336"),d=n("b0af"),p=n("99d9"),u=n("cc20"),h=n("8fea"),f=n("132d"),y=n("8654"),b=Object(o["a"])(s,i,a,!1,null,null,null);t["default"]=b.exports;l()(b,{VBtn:c["a"],VCard:d["a"],VCardTitle:p["c"],VChip:u["a"],VDataTable:h["a"],VIcon:f["a"],VTextField:y["a"]})},d7a3:function(e,t,n){"use strict";n("628d")}}]);
//# sourceMappingURL=chunk-0c9b8c58.f1f66775.js.map