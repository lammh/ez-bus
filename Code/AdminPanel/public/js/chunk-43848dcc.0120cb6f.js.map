{"version":3,"sources":["webpack:///./src/views/complaints/index.vue?872c","webpack:///./src/views/complaints/complaints-table.vue?0f0d","webpack:///src/views/complaints/complaints-table.vue","webpack:///./src/views/complaints/complaints-table.vue?b67e","webpack:///./src/views/complaints/complaints-table.vue","webpack:///src/views/complaints/index.vue","webpack:///./src/views/complaints/index.vue?ac74","webpack:///./src/views/complaints/index.vue","webpack:///./src/views/complaints/complaints-table.vue?f60b","webpack:///./src/views/complaints/index.vue?7cfe"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","model","value","callback","$$v","active_tab","expression","_l","tab","key","idx","_s","icon","title","activeComplaints","isLoading","on","viewComplaint","refundComplaint","cancelComplaint","completedComplaints","viewResponse","staticRenderFns","isActive","activeHeaders","completedHeaders","complaints","search","scopedSlots","_u","fn","proxy","ref","item","_f","created_at","planned_time","actual_time","_e","getComplaintActionColor","action","getComplaintActionValue","getIconOfComplaintAction","$event","$emit","indexOf","props","Array","Boolean","data","methods","component","VBtn","VChip","VDataTable","VIcon","VTextField","components","complaintsTable","tabs","icons","mdiAccountCheck","mdiPlayCircleOutline","watch","localStorage","tabIdxComplaints","newVal","mounted","parseInt","loadComplaints","axios","$swal","html","complaint","showCancelButton","confirmButtonText","response","input","inputPlaceholder","inputAttributes","console","log","result","isConfirmed","takeActionOnComplaintServer","VCard","VCardTitle","VTab","VTabItem","VTabs","VTabsItems"],"mappings":"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","file":"js/chunk-43848dcc.0120cb6f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',[_c('v-card-title',[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\" mdi-comment-alert \")]),_c('span',{staticClass:\"pl-2\"},[_vm._v(\"Complaints\")])],1),_c('v-tabs',{staticClass:\"my-2\",attrs:{\"show-arrows\":\"\"},model:{value:(_vm.active_tab),callback:function ($$v) {_vm.active_tab=$$v},expression:\"active_tab\"}},_vm._l((_vm.tabs),function(tab){return _c('v-tab',{key:tab.idx},[_c('v-icon',{staticClass:\"me-3\",attrs:{\"size\":\"20\"}},[_vm._v(\" \"+_vm._s(tab.icon)+\" \")]),_c('span',[_vm._v(_vm._s(tab.title))])],1)}),1),_c('v-tabs-items',{model:{value:(_vm.active_tab),callback:function ($$v) {_vm.active_tab=$$v},expression:\"active_tab\"}},[_c('v-tab-item',[_c('complaints-table',{attrs:{\"complaints\":_vm.activeComplaints,\"is-loading\":_vm.isLoading,\"is-active\":true},on:{\"view-complaint\":_vm.viewComplaint,\"refund-complaint\":_vm.refundComplaint,\"cancel-complaint\":_vm.cancelComplaint}})],1),_c('v-tab-item',[_c('complaints-table',{attrs:{\"complaints\":_vm.completedComplaints,\"is-loading\":_vm.isLoading,\"is-active\":false},on:{\"view-complaint\":_vm.viewComplaint,\"refund-complaint\":_vm.refundComplaint,\"cancel-complaint\":_vm.cancelComplaint,\"view-response\":_vm.viewResponse}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-data-table',{attrs:{\"item-key\":\"id\",\"loading\":_vm.isLoading,\"loading-text\":\"Loading... Please wait\",\"headers\":_vm.isActive ? _vm.activeHeaders : _vm.completedHeaders,\"items\":_vm.complaints,\"search\":_vm.search},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-text-field',{staticClass:\"mx-4\",attrs:{\"label\":\"Search\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})]},proxy:true},{key:\"item.created_at\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('small',[_vm._v(_vm._s(_vm._f(\"moment\")(item.created_at,\"LL\")))]),_vm._v(\" - \"),_c('small',{staticClass:\"text-muted\"},[_vm._v(_vm._s(_vm._f(\"moment\")(item.created_at,\"LT\")))])]}},{key:\"item.planned_time\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('small',[_vm._v(_vm._s(_vm._f(\"moment\")(item.planned_time,\"LL\")))]),_vm._v(\" - \"),_c('small',{staticClass:\"text-muted\"},[_vm._v(_vm._s(_vm._f(\"moment\")(item.planned_time,\"LT\")))])]}},{key:\"item.actual_time\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('small',[_vm._v(_vm._s(_vm._f(\"moment\")(item.actual_time,\"LL\")))]),_vm._v(\" - \"),_c('small',{staticClass:\"text-muted\"},[_vm._v(_vm._s(_vm._f(\"moment\")(item.actual_time,\"LT\")))])]}},{key:\"item.action\",fn:function(ref){\nvar item = ref.item;\nreturn [(!_vm.isActive)?_c('v-chip',{attrs:{\"color\":_vm.getComplaintActionColor(item.action),\"dark\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.getComplaintActionValue(item.action))+\" \"),_c('v-icon',{staticClass:\"ml-2\"},[_vm._v(\" \"+_vm._s(_vm.getIconOfComplaintAction(item.action))+\" \")])],1):_vm._e()]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"depressed\":\"\",\"small\":\"\",\"density\":\"compact\"},on:{\"click\":function($event){return _vm.$emit('view-complaint', item)}}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\" mdi-message-bulleted \")])],1),(!_vm.isActive)?_c('v-btn',{attrs:{\"depressed\":\"\",\"small\":\"\",\"color\":\"primary\",\"density\":\"compact\"},on:{\"click\":function($event){return _vm.$emit('view-response', item)}}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\" mdi-email-sync-outline \")])],1):_vm._e(),(_vm.isActive)?_c('v-btn',{staticClass:\"mr-2\",attrs:{\"depressed\":\"\",\"small\":\"\",\"density\":\"compact\",\"color\":\"success\"},on:{\"click\":function($event){_vm.$emit('refund-complaint', item, _vm.complaints.indexOf(item))}}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\" mdi-cash-refund \")])],1):_vm._e(),(_vm.isActive)?_c('v-btn',{attrs:{\"depressed\":\"\",\"small\":\"\",\"density\":\"compact\",\"color\":\"error\"},on:{\"click\":function($event){_vm.$emit('cancel-complaint', item, _vm.complaints.indexOf(item))}}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\" mdi-close-octagon-outline \")])],1):_vm._e()]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-data-table\n    item-key=\"id\"\n    :loading=\"isLoading\"\n    loading-text=\"Loading... Please wait\"\n    :headers=\"isActive ? activeHeaders : completedHeaders\"\n    :items=\"complaints\"\n    :search=\"search\"\n  >\n    <template v-slot:top>\n      <v-text-field\n        v-model=\"search\"\n        label=\"Search\"\n        class=\"mx-4\"\n      ></v-text-field>\n    </template>\n\n\n    <template v-slot:item.created_at=\"{ item }\">\n      <small>{{ item.created_at | moment(\"LL\") }}</small> -\n      <small class=\"text-muted\">{{ item.created_at | moment(\"LT\") }}</small>\n    </template>\n\n    <template v-slot:item.planned_time=\"{ item }\">\n      <small>{{ item.planned_time | moment(\"LL\") }}</small> -\n      <small class=\"text-muted\">{{ item.planned_time | moment(\"LT\") }}</small>\n    </template>\n\n    <template v-slot:item.actual_time=\"{ item }\">\n      <small>{{ item.actual_time | moment(\"LL\") }}</small> -\n      <small class=\"text-muted\">{{ item.actual_time | moment(\"LT\") }}</small>\n    </template>\n\n    <template v-slot:item.action=\"{ item }\">\n      <v-chip v-if=\"!isActive\"\n        :color=\"getComplaintActionColor(item.action)\"\n        dark\n      >\n        {{ getComplaintActionValue(item.action) }}\n        <v-icon class=\"ml-2\">\n          {{ getIconOfComplaintAction(item.action) }}\n        </v-icon>\n      </v-chip>\n    </template>\n    \n    <template v-slot:item.actions=\"{ item }\">\n      \n      <!-- view complaint -->\n      <v-btn depressed small density=\"compact\" @click=\"$emit('view-complaint', item)\">\n        <v-icon dark> mdi-message-bulleted </v-icon>\n      </v-btn>\n\n      <v-btn v-if=\"!isActive\" depressed small color=\"primary\" density=\"compact\" @click=\"$emit('view-response', item)\">\n        <v-icon dark> mdi-email-sync-outline </v-icon>\n      </v-btn>\n\n      <v-btn v-if=\"isActive\" class=\"mr-2\" depressed small density=\"compact\" color=\"success\" @click=\"$emit('refund-complaint', item, complaints.indexOf(item))\">\n        <v-icon dark> mdi-cash-refund </v-icon>\n      </v-btn>\n      <v-btn v-if=\"isActive\" depressed small density=\"compact\" color=\"error\" @click=\"$emit('cancel-complaint', item, complaints.indexOf(item))\">\n        <v-icon dark> mdi-close-octagon-outline </v-icon>\n      </v-btn>\n    </template>\n  </v-data-table>\n</template>\n\n<script>\nexport default {\n  props: {\n    complaints: Array,\n    isLoading: Boolean,\n    isActive: Boolean,\n  },\n  data() {\n    return {\n      search: \"\",\n      activeHeaders: [\n        { text: \"Ticket\", value: \"ticket_number\", align: \"start\" },\n        { text: \"Customer\", value: \"user.name\" },\n        { text: \"Stop\", value: \"stop_name\" },\n        { text: \"Distance To Stop\", value: \"distanceToStop\" },\n        { text: \"Distance To Bus\", value: \"distanceToBus\" },\n        { text: \"Planned arrival\", value: \"planned_time\" },\n        { text: \"Actual arrival\", value: \"actual_time\" },\n        { text: \"Created\", value: \"created_at\" },\n        { text: \"\", value: \"actions\", sortable: false},\n      ],\n      completedHeaders: [\n        { text: \"Ticket\", value: \"ticket_number\", align: \"start\" },\n        { text: \"Customer\", value: \"user.name\" },\n        { text: \"Stop\", value: \"stop_name\" },\n        { text: \"Distance To Stop\", value: \"distanceToStop\" },\n        { text: \"Distance To Bus\", value: \"distanceToBus\" },\n        { text: \"Planned arrival\", value: \"planned_time\" },\n        { text: \"Actual arrival\", value: \"actual_time\" },\n        { text: \"Created\", value: \"created_at\" },\n        { text: \"Action\", value: \"action\" },\n        { text: \"\", value: \"actions\", sortable: false },\n      ],\n    };\n  },\n  methods: {\n    getComplaintActionColor(action) {\n      switch (action) {\n        case \"refund\":\n          return \"success\";\n        case \"cancel\":\n          return \"error\";\n        default:\n          return \"primary\";\n      }\n    },\n    getComplaintActionValue(action) {\n      switch (action) {\n        case \"refund\":\n          return \"Refunded\";\n        case \"cancel\":\n          return \"Cancelled\";\n        default:\n          return \"Pending\";\n      }\n    },\n    getIconOfComplaintAction(action) {\n      switch (action) {\n        case \"refund\":\n          return \"mdi-cash-refund\";\n        case \"cancel\":\n          return \"mdi-close-octagon-outline\";\n        default:\n          return \"mdi-email-sync-outline\";\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.theme--light.v-list-item:not(.v-list-item--active):not(.v-list-item--disabled):hover{\n  cursor: pointer;\n  background: rgba($primary-shade--light, 0.15) !important;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./complaints-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./complaints-table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./complaints-table.vue?vue&type=template&id=5b6e8579&\"\nimport script from \"./complaints-table.vue?vue&type=script&lang=js&\"\nexport * from \"./complaints-table.vue?vue&type=script&lang=js&\"\nimport style0 from \"./complaints-table.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VChip,VDataTable,VIcon,VTextField})\n","<template>\n  <div>\n    <v-card>\n      <v-card-title>\n      <v-icon color=\"primary\">\n        mdi-comment-alert\n      </v-icon>\n        <span class=\"pl-2\">Complaints</span>\n      </v-card-title>\n      <v-tabs v-model=\"active_tab\" show-arrows class=\"my-2\">\n        <v-tab v-for=\"tab in tabs\" :key=\"tab.idx\">\n          <v-icon size=\"20\" class=\"me-3\">\n            {{ tab.icon }}\n          </v-icon>\n          <span>{{ tab.title }}</span>\n        </v-tab>\n      </v-tabs>\n    <v-tabs-items v-model=\"active_tab\">\n      <!-- active -->\n      <v-tab-item>\n        <complaints-table :complaints=\"activeComplaints\" :is-loading=\"isLoading\" :is-active=\"true\"\n        @view-complaint=\"viewComplaint\"\n        @refund-complaint=\"refundComplaint\"\n        @cancel-complaint=\"cancelComplaint\"\n        ></complaints-table>\n      </v-tab-item>\n\n      <!-- completed -->\n      <v-tab-item>\n        <complaints-table :complaints=\"completedComplaints\" :is-loading=\"isLoading\" :is-active=\"false\"\n        @view-complaint=\"viewComplaint\"\n        @refund-complaint=\"refundComplaint\"\n        @cancel-complaint=\"cancelComplaint\"\n        @view-response=\"viewResponse\"\n        ></complaints-table>\n      </v-tab-item>\n\n    </v-tabs-items>\n    </v-card>\n  </div>\n</template>\n\n<script>\n\nimport {\n  mdiAccountCheck,\n  mdiPlayCircleOutline,\n} from \"@mdi/js\";\n\nimport complaintsTable from \"./complaints-table.vue\";\nimport auth from '@/services/AuthService';\n\nexport default {\n  components: {\n    complaintsTable\n  },\n  data() {\n    return {\n      isLoading: false,\n      activeComplaints: [],\n      completedComplaints: [],\n      tabs: [\n        { idx: 0, title: \"Active\", icon: mdiPlayCircleOutline },\n        { idx: 1, title: \"Completed\", icon: mdiAccountCheck },\n      ],\n      active_tab: null,\n      icons: {\n        mdiAccountCheck,\n        mdiPlayCircleOutline,\n      },\n    };\n  },\n  watch: {\n    active_tab: function (newVal, oldVal) {\n      localStorage.tabIdxComplaints = newVal;\n    },\n  },\n  mounted() {\n    this.active_tab = parseInt(localStorage.tabIdxComplaints);\n    this.loadComplaints();\n  },\n  methods: {\n    loadComplaints() {\n      this.isLoading = true;\n      this.activeComplaints = [];\n      this.completedComplaints = [];\n      axios\n        .get(`/complaints/all`)\n        .then((response) => {\n          this.activeComplaints = response.data.active;\n          this.completedComplaints = response.data.completed;\n        })\n        .catch((error) => {\n          this.$notify({\n            title: \"Error\",\n            text: \"Error while retrieving complaints\",\n            type: \"error\",\n          });\n          console.log(error);\n          auth.checkError(error.response.data.message, this.$router, this.$swal);\n        })\n        .then(() => {\n          this.isLoading = false;\n        });\n    },\n\n    viewComplaint(complaint) {\n      //swal with the complaint message\n      this.$swal({\n        title: \"Complaint\",\n        html: complaint.complaint,\n        icon: \"info\",\n        showCancelButton: false,\n        confirmButtonText: \"Ok\",\n      });\n    },\n    viewResponse(complaint) {\n      //swal with the complaint message\n      this.$swal({\n        title: \"Response\",\n        html: complaint.response,\n        icon: \"info\",\n        showCancelButton: false,\n        confirmButtonText: \"Ok\",\n      });\n    },\n\n    cancelComplaint(complaint, index) {\n      this.$swal({\n        input: 'textarea',\n        inputPlaceholder: 'Why are you cancelling this complaint?',\n        inputAttributes: {\n          'aria-label': 'Why are you cancelling this complaint?'\n        },\n        title: \"Cancel Complaint\",\n        html: \"Are you sure you want to cancel this complaint?\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"Yes, cancel it!\",\n      }).then((result) => {\n        console.log(result);\n        if (result.isConfirmed) {\n          this.takeActionOnComplaintServer(complaint.id, result.value, index, \"cancel\");\n        }\n      });\n    },\n\n    refundComplaint(complaint, index) {\n      this.$swal({\n        input: 'textarea',\n        inputPlaceholder: 'Why are you are approving this refund?',\n        inputAttributes: {\n          'aria-label': 'Why are you are approving this refund?'\n        },\n        title: \"Refund Complaint\",\n        html: \"Are you sure you want to refund this complaint?\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"Yes, refund it!\",\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.takeActionOnComplaintServer(complaint.id, result.value, index, \"refund\");\n        }\n      });\n    },\n\n    takeActionOnComplaintServer(complaint_id, responseText, index, action) {\n      this.isLoading = true;\n      axios\n        .post(`/complaints/take-action`, {\n          complaint_id: complaint_id,\n          response: responseText,\n          action: action,\n        })\n        .then((response) => {\n          this.$notify({\n            title: \"Success\",\n            text: \"Complaint \" + action + \"d\",\n            type: \"success\",\n          });\n          let complaintWithAction = this.activeComplaints[index];\n          complaintWithAction.response = responseText;\n          complaintWithAction.action = action;\n\n          //add to completed in first position\n          this.completedComplaints.unshift(complaintWithAction);\n          this.activeComplaints.splice(index, 1);\n        })\n        .catch((error) => {\n          this.$notify({\n            title: \"Error\",\n            text: \"Error while \" + action + \"ing complaint\",\n            type: \"error\",\n          });\n          this.$swal(\"Error\", error.response.data.message, \"error\");\n        })\n        .then(() => {\n          this.isLoading = false;\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.theme--light.v-list-item:not(.v-list-item--active):not(.v-list-item--disabled):hover{\n  cursor: pointer;\n  background: rgba($primary-shade--light, 0.15) !important;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4b024f93&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VCard,VCardTitle,VIcon,VTab,VTabItem,VTabs,VTabsItems})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./complaints-table.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}